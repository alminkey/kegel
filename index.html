
<!doctype html>
<html lang="bs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>KegelPilot v15 (onboarding)</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:#0b0e12;color:#e0e6ef}
    header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:#0f141c;position:sticky;top:0}
    .brandimg{height:34px}
    .ver{font-size:11px;color:#9aa0a6}
    main{padding:16px}
    .card{border:1px solid rgba(255,255,255,.12);border-radius:16px;padding:16px;margin-bottom:12px;background:rgba(255,255,255,.03)}
    /* onboarding */
    .ob{position:fixed;inset:0;background:rgba(5,8,12,.75);backdrop-filter:blur(10px);display:none;align-items:center;justify-content:center;z-index:9999}
    .ob.active{display:flex;}
    .sheet{width:min(820px,94vw);max-height:94vh;background:#0f141c;border:1px solid rgba(255,255,255,.08);border-radius:18px;box-shadow:0 10px 60px rgba(0,0,0,.6);display:grid;grid-template-rows:auto 1fr auto}
    .sheet header,.sheet footer{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.06);display:flex;justify-content:space-between;align-items:center}
    .sheet footer{border-top:1px solid rgba(255,255,255,.06);border-bottom:0}
    .slides{padding:14px;overflow:auto}
    .btn{appearance:none;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:#e0e6ef;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:800}
    .btn.primary{border-color:transparent;background:linear-gradient(90deg,#66E6A8,#81D4FA); color:#0b0e12}
    .stepdots{display:flex;gap:8px}
    .dotx{width:8px;height:8px;border-radius:999px;background:#2a3342} .dotx.active{background:#66E6A8; box-shadow:0 0 0 4px rgba(102,230,168,.15)}
  </style>
</head>
<body>
  <header>
    <div style="display:flex;align-items:center;gap:6px">
      <img src="assets/logo_text.png" class="brandimg" alt="KegelPilot"><span class="ver">v15</span>
    </div>
  </header>
  <main>
    <div class="card">Naslovna (demo) — Onboarding bi se trebao pojaviti odmah na prvom otvaranju.</div>
  </main>

  <div id="onboarding" class="ob" aria-hidden="true">
    <div class="sheet">
      <header>
        <strong>Dobrodošao u KegelPilot</strong>
        <button class="btn" id="obSkip">Preskoči</button>
      </header>
      <div class="slides">
        <div id="s1"><h2>Počni jednostavno, napreduj pametno</h2><p>Kratke, diskretne vježbe za mišiće karličnog dna. Plan Rang 1 te vodi postepeno.</p></div>
        <div id="s2" style="display:none"><h2>Video uvod (uskoro)</h2><img src="assets/instructor_placeholder.png" style="width:100%;border-radius:14px;border:1px solid rgba(255,255,255,.08)"></div>
        <div id="s3" style="display:none"><h2>Odaberi koliko puta dnevno</h2><select id="perday"><option value="1">1×</option><option value="2" selected>2×</option><option value="3">3×</option></select></div>
      </div>
      <footer>
        <div class="stepdots">
          <div class="dotx active" data-step="1"></div>
          <div class="dotx" data-step="2"></div>
          <div class="dotx" data-step="3"></div>
        </div>
        <div>
          <button class="btn" id="obBack" disabled>Nazad</button>
          <button class="btn primary" id="obNext">Dalje</button>
          <button class="btn primary" id="obDone" style="display:none">Završi</button>
        </div>
      </footer>
    </div>
  </div>

<script>
(function(){
  const ob = document.getElementById('onboarding');
  const s = [document.getElementById('s1'),document.getElementById('s2'),document.getElementById('s3')];
  const dots = document.querySelectorAll('.dotx');
  let i=0;
  function setStep(n){
    i = Math.max(0, Math.min(2, n));
    s.forEach((el,idx)=> el.style.display = idx===i ? '' : 'none');
    dots.forEach((d,idx)=> d.classList.toggle('active', idx===i));
    document.getElementById('obBack').disabled = (i===0);
    document.getElementById('obNext').style.display = (i<2)? '' : 'none';
    document.getElementById('obDone').style.display = (i===2)? '' : 'none';
  }
  function showIfNeeded(){
    if(!localStorage.getItem('kp_onboard_v1')){
      ob.classList.add('active'); ob.setAttribute('aria-hidden','false'); setStep(0);
    }
  }
  document.getElementById('obNext').addEventListener('click', ()=> setStep(i+1));
  document.getElementById('obBack').addEventListener('click', ()=> setStep(i-1));
  document.getElementById('obDone').addEventListener('click', ()=>{ localStorage.setItem('kp_onboard_v1','1'); ob.classList.remove('active'); });
  document.getElementById('obSkip').addEventListener('click', ()=>{ localStorage.setItem('kp_onboard_v1','1'); ob.classList.remove('active'); });
  showIfNeeded();
})();
</script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./service-worker.js');
}
</script>
</body>
</html>
